<?xml version="1.0" encoding="UTF-8"?>

<!--
    Created on : 10 January 2010, 10:12
    Description: WList definition for Request Categories.
-->

<list state="whelpdesk.models.requestcategory.list">
    <!-- Query -->
    <query>
        <select>#__whelpdesk_request_categories.*</select>
        <select>COUNT(#__whelpdesk_requests.id) AS requests</select>
        <from>#__whelpdesk_request_categories</from>
        <join type="LEFT">#__whelpdesk_requests ON #__whelpdesk_requests.category_id = #__whelpdesk_request_categories.id</join>
        <order>#__whelpdesk_request_categories.name</order>
        <where>#__whelpdesk_request_categories.parent_id != 0</where>
        <group>#__whelpdesk_request_categories.id</group>
    </query>

    <!-- Filters -->
    <filter
            id="search"
            name="search"
            type="search"
            position="left">
        <label>WHD_LIST:FILTER</label>
        <column>name</column>
        <attribute name="class=">text_area</attribute>
        <attribute name="size">60</attribute>
    </filter>
    <filter
            id="published"
            nane="published"
            type="published"
            position="right">
        <label>WHD_LIST:STATE</label>
        <column>published</column>
    </filter>

    <!-- Columns -->
    <column
            type="select"
            cansort="true"
            width="2%">
        <label>WHD_RC:SELECT</label>
        <name>id</name>
    </column>
    <column
            type="nested"
            cansort="true">
        <label>WHD_RC:NAME</label>
        <name>name</name>
        <link link="index.php?option=com_whelpdesk&amp;task=requestcategory.edit&amp;id=%1$d">
            <param>id</param>
        </link>
    </column>
    <!--
    <column type="text" cansort="false" width="150">
        <label>WHD_R:REQUESTS</label>
        <text translate="true">WHD_R:REQUESTS</text>
        <name/>
        <link link="index.php?option=com_whelpdesk&amp;task=requests.list&amp;requestcategory=%1$d">
            <param>id</param>
        </link>
    </column>
    -->
    <column type="simple" cansort="false" width="100">
        <label>WHD_R:REQUESTS</label>
        <name>requests</name>
        <link link="index.php?option=com_whelpdesk&amp;task=request.list&amp;category_id=%1$d">
            <param>id</param>
        </link>
        <attribute name="style" value="text-align: center;" />
    </column>
    <column type="published" cansort="true" width="70">
        <label>WHD_DATA:PUBLISHED</label>
        <name>published</name>
    </column>
    <column
            type="order"
            cansort="true"
            width="50">
        <label>WHD_DATA:ORDER</label>
        <name>ordering</name>
        <attribute name="style" value="text-align: center;" />
    </column>
    <column
            type="simple"
            cansort="true"
            width="70">
        <label>WHD_DATA:REVISION</label>
        <name>revised</name>
        <attribute name="style" value="text-align: center;" />
    </column>
</list>
